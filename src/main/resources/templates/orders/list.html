<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Rapidex Â· Orders</title>
    <link
            th:href="@{/bootstrap/css/bootstrap.min.css}"
            rel="stylesheet"
    >
</head>
<body class="bg-light">

<div class="container text-center mt-4 mb-5">

    <img
            th:src="@{/images/logo_rapidex_trinidad.png}"
            alt="Rapidex Logo"
            style="max-height: 300px;"
    >
</div>

<div class="container">
    <div class="row justify-content-center">
        <div class="col-lg-10">

            <div class="card shadow-sm">
                <div class="card-body">

                    <h4 class="card-title mb-4 text-center">
                        Orders
                    </h4>

                    <div class="mb-4 align-content-center">
                        <a th:href="@{/rapidex}" class="btn btn-secondary btn-sm">Back to main screen</a>
                        <a th:href="@{/rapidex/orders/new}" class="btn btn-secondary btn-sm">Register a new order</a>
                    </div>

                    <table class="table table-hover align-middle">
                        <thead class="table-light">
                        <tr>
                            <th>ID</th>
                            <th>Products</th>
                            <th>Employee</th>
                            <th>Preparation Date</th>
                            <th>Dispatch Date</th>
                            <th class="text-center">Actions</th>
                        </tr>
                        </thead>

                        <tbody>
                        <tr th:each="order : ${orders}">

                            <td th:text="${order.id}"></td>

                            <td>
                                <ul class="mb-0 ps-3">
                                    <li th:each="product : ${order.products}"
                                        th:text="${product.productName}">
                                    </li>
                                </ul>
                            </td>

                            <td>
        <span th:if="${order.employee != null}"
              th:text="${order.employee.firstName + ' ' + order.employee.lastName}">
        </span>

                                <span th:if="${order.employee == null}"
                                      class="text-muted">
            Unassigned
        </span>
                            </td>

                            <td th:text="${order.prepDate}"></td>
                            <td th:text="${order.dispatchDate}"></td>

                            <td class="text-center">
                                <a th:href="@{/rapidex/orders/{id}(id=${order.id})}"
                                   class="btn btn-outline-primary btn-sm">
                                    Order Info
                                </a>
                            </td>

                        </tr>
                        </tbody>

                    </table>

                    <div
                            th:if="${#lists.isEmpty(orders)}"
                            class="text-center text-muted mt-4"
                    >
                        No orders found.
                    </div>

                </div>
            </div>

        </div>
    </div>
</div>
</body>
</html>
